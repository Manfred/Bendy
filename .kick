recipe :ignore
ignore(/^(tmp|.git)/)

recipe :ruby

process do |files|
  Ruby.run_tests(files.take_and_map do |file|
    case file
    when %r{_test.rb$}
      file
    when %r{^(.*)\.rb$}
      "#{$1.split('.rb').first}_test.rb"
    end
  end)
end
